<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>

    <!-- Bootstrap -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"
    />

    <!-- Link de leaflet -->
    <link
      rel="stylesheet"
      href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
      integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
      crossorigin="anonymous"
    />

    <!-- Script leaflet -->
    <script
      src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
      integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
      crossorigin="anonymous"
    ></script>

    <!-- Estilo html -->
    <style>
      html,
      body {
        height: 100%;
        margin: 0;
      }
      .leaflet-container {
        height: 400px;
        width: 600px;
        max-width: 100%;
        max-height: 100%;
      }
    </style>
  </head>
  <body>

    <!-- mapa principal -->    
        <!-- Seccion barra de navegacion -->
        <section class="seccion-navbar">
          <div class="container">
            <div class="row">
              <div class="columna col-12 col-xl-12"> 
                <!-- Barra de navegacion -->
                <nav class="navbar navbar-expand-lg bg-body-tertiary" style="border: 3px solid #00597D;">
                  <div class="container-fluid">
                    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarTogglerDemo01" aria-controls="navbarTogglerDemo01" aria-expanded="false" aria-label="Toggle navigation">
                      <span class="navbar-toggler-icon"></span>
                    </button>
                    <div class="collapse navbar-collapse" id="navbarTogglerDemo01">
                      <a class="navbar-brand" href="index.html">Lumireport</a>
                      <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                      </ul>
                      <form class="d-flex" role="search">
                        <input class="form-control me-2" type="search" placeholder="Search" aria-label="Search">
                        <button class="btn btn-outline-success" type="submit">Search</button>
                      </form>
                    </div>
                  </div>
                </nav>
              </div>   
            <div class="row">
              <div class="container">

              </div>
            </div> 
            <section mapa = seccion-mapa>
              <div class="container">
                <div id="map" style="width: 600px; height: 800px"></div>
                <!-- Mapas base -->
    <div Mapa_base>
      <script>
        var map = L.map("map").setView([3.22721, -76.51222], 16);

        //Mapa 1 open street map (mapa principal)
        const tiles = L.tileLayer(
          "https://tile.openstreetmap.org/{z}/{x}/{y}.png",
          {
            maxZoom: 19,
            attribution:
              '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>',
          }
        ).addTo(map);
        //Mapa 2 Google hibrido
        googleHybrid = L.tileLayer(
          "http://{s}.google.com/vt/lyrs=s,h&x={x}&y={y}&z={z}",
          {
            maxZoom: 20,
            opacity: 0.6,
            subdomains: ["mt0", "mt1", "mt2", "mt3"],
          }
        );
        //Mapa 3 World imagery de ESRI
        var Esri_WorldImagery = L.tileLayer(
          "https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",
          {
            opacity: 0.6,
            attribution:
              "Tiles &copy; Esri &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community",
          }
        );
        //Mapa 4 Dark Matter
        var CartoDB_DarkMatter = L.tileLayer(
          "https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png",
          {
            attribution:
              '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>',
            subdomains: "abcd",
            maxZoom: 20,
          }
        );

        // Cuadro de convenciones del Mapa base
        const baseLayers = {
          OpenStreetMap: tiles,
          "Esri World Imagery": Esri_WorldImagery,
          CartoDB_DarkMatter: CartoDB_DarkMatter,
          googleHybrid: googleHybrid,
        };

        L.control.layers(baseLayers).addTo(map);
        L.control.scale({ position: "bottomleft" }).addTo(map);
      </script>
      <div formas_basicas>
        <script>
          // Crear popup por defecto
          const popup = L.popup()
            .setLatLng([3.22721, -76.51222])
            .setContent("<b>Bienvenidos a </b><br />Lumireport")
            .openOn(map);

          // Circulo por defecto
          const buffer = L.circle([3.22721, -76.51222], {
            color: "red",
            fillColor: "#f03",
            fillOpacity: 0.5,
            radius: 50,
          })
            .addTo(map)
            .bindPopup("I am a buffer.");

          //   Poligono por defecto
          const polygon = L.polygon([
            [3.231133, -76.516578],
            [3.232954, -76.517984],
            [3.233929, -76.51662],
            [3.232067, -76.5152],
          ])
            .addTo(map)
            .bindPopup("I am a polygon.");

          //   Marcas
          const marker = L.marker([3.22721, -76.51202])
            .addTo(map)
            .bindPopup("<b>Bienvenidos a </b><br />Lumireport")
            .openPopup();

          // Funcion para clickear en el mapa
          function onMapClick(e) {
            popup
              .setLatLng(e.latlng)
              .setContent(`<b>Coordenadas</b><br />${e.latlng.toString()}`)
              .openOn(map);
          }

          map.on("click", onMapClick);
        </script>
      </div>
      <!-- <div Capas_proyecto>
        <div>
          <script>
            // Agregar capas desde el geoserver local
            var puntos1 = L.tileLayer
              .wms("http://localhost:8080/geoserver/proyecto_sig3/wms?", {
                layers: "proyecto_sig3:postes",
                format: "image/png",
                transparent: true,
                attribution: "Lumireport-2024",
              })
              .addTo(map);

            var manzanas1 = L.tileLayer
              .wms("http://localhost:8080/geoserver/proyecto_sig3/wms?", {
                layers: "proyecto_sig3:manzanas",
                format: "image/png",
                opacity: 0.4,
                transparent: true,
                attribution: "Lumireport-2024",
              })
              .addTo(map);
            var vias1 = L.tileLayer
              .wms("http://localhost:8080/geoserver/proyecto_sig3/wms?", {
                layers: "proyecto_sig3:vias",
                format: "image/png",
                opacity: 0.6,
                transparent: true,
                attribution: "Lumireport-2024",
              })
              .addTo(map);

            // Agregar las capas GeoJSON
            // L.geoJSON(manzanas).addTo(map);
            // L.geoJSON(vias).addTo(map);
            // L.geoJSON(postes).addTo(map);
          </script>
        </div> -->
      </div>
    </div>

              </div>

    
            </section>

    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
      crossorigin="anonymous"
    ></script>
  </body>
</html>
